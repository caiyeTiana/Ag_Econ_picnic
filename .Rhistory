crossref_email <- Sys.getenv("CROSSREF_EMAIL")
openai_apikey <- Sys.getenv("OPENAI_APIKEY")
retrieve_crossref_issn_data <- function(issn_list, start_date, end_date, verbose=FALSE){
K <- length(issn_list)
out <- list()
for(i in 1:K){
issn <- issn_list[i]
if(verbose) cat(issn, "\n")
j <- 0
tmp <- list()
for(type in c("created", "published")){
j <- j + 1
tmp[[j]] <- call_crossref_api(
id=issn,
type="issn",
start=start_date,
end=end_date,
date_type=type)
}
tmp <- rbind(
get_crossref_articles(tmp[[1]]),
get_crossref_articles(tmp[[2]])
)
if(!is.null(tmp)) tmp$issn <- issn
out[[i]] <- tmp[!duplicated(tmp$url),]
}
if(is.null(out)) return(NULL)
out <- do.call(rbind, out)
return(out)
}
field <- commandArgs(trailingOnly = TRUE)
library(httr)
library(jsonlite)
others_journals <- read.csv("./parameters/others_economics_journals.csv")
print(others_journals)
Rscript crawl.R others
q()
